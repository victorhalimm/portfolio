---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import { Image } from "astro:assets";

export async function getStaticPaths() {
  const projects = await getCollection("projects");

  const paths = projects.map((entry) => ({
    params: {
      project: entry.slug,
    },
    props: {
      data: entry.data,
    },
  }));

  return paths;
}

const { data } = Astro.props;
const im = import.meta.glob<{ default: ImageMetadata }>('/src/assets/**/*.{jpeg,jpg,png,gif,webp}')
---

<Layout title=`${data.name}`>
  <main class="min-h-screen">
    <div class="lg:p-56 flex flex-col space-y-6">
      <h2 class="text-5xl text-white font-semibold">{data.name}</h2>
      <div class="flex space-x-2">
        <a target="_blank" href={data.deployment} class="text-gray-400 hover:text-white underline text-lg">demo</a>
        <span class="text-gray-400 hover:text-white text-lg">/</span>
        <a target="_blank" href={data.githublink} class="text-gray-400 hover:text-white underline text-lg">repo</a>
      </div>
      <p class="text-lg text-gray-400">{data.description}</p>
      <Image
        transition:name={data.name}
        src={im[data.mockup]()}
        alt={`${data.title} mockup`}
        class="h-full object-cover pt-4"
      />
    </div>
  </main>
</Layout>


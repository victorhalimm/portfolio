---
import Layout from "../layouts/Layout.astro";
import { MdOutlineEmail } from "react-icons/md";
import { FiGithub } from "react-icons/fi";
import { CiLinkedin } from "react-icons/ci";
import { FaInstagram } from "react-icons/fa";
import NavButton from "../components/Button/NavButton";
import { getCollection } from "astro:content";
import TypewriterBuilder from "../components/Typewriter/TypewriterBuilder";
import { portfolioCollectionsSchema } from "../content/config";
import {Image} from "astro:assets"

const projectCollection = await getCollection("projects");

const parseCollections = (collections: any) => {
  try {
      return portfolioCollectionsSchema.parse(collections);
  } catch (err: any) {
    console.log(err.message)
    return null
  }
};

const parsedProjectCollections = parseCollections(projectCollection)

const im = import.meta.glob<{ default: ImageMetadata }>('/src/assets/**/*.{jpeg,jpg,png,gif,webp}')
const roles = ["full-stack developer", "app developer", "é–‹ç™ºè€…"]
---


<style>
  .wave {
  animation-name: wave-animation;  
  animation-duration: 2.5s;        
  animation-iteration-count: infinite; 
  transform-origin: 70% 70%; 
  display: inline-block;
}

@keyframes wave-animation {
    0% { transform: rotate( 0.0deg) }
   10% { transform: rotate(14.0deg) }  
   20% { transform: rotate(-8.0deg) }
   30% { transform: rotate(14.0deg) }
   40% { transform: rotate(-4.0deg) }
   50% { transform: rotate(10.0deg) }
   60% { transform: rotate( 0.0deg) } 
  100% { transform: rotate( 0.0deg) }
}




/* For demonstration purposes only: */
body { font-size: 3.5em }
h1 { font-size: 0.5em }
</style>


<Layout title="Victor Halim">
  <main
    class="relative w-full min-h-screen flex flex-col items-center justify-center"
  >
      <div class="text-4xl text-purple-600 tracking-wider">victor halim</div>
    <div class="text-xl flex items-center pt-4 pb-8">
      <span class="text-gray-700">&#10100;</span>
      <span class="text-content w-full px-2">
        <TypewriterBuilder client:load texts={roles} />
      </span>
      <span class="text-gray-700">&#10101;</span>
    </div>

    <div
      class="flex items-center text-content flex-wrap font-thin text-3xl justify-between w-3/4 md:w-1/3"
    >
      <NavButton href="mailto:victorhalim18@gmail.com" icon={MdOutlineEmail} text="Email" />
      <NavButton href="https://github.com/victorhalimm" icon={FiGithub} text="GitHub" />
      <NavButton href="https://www.linkedin.com/in/victorhalimm/" icon={CiLinkedin} text="LinkedIn" />
      <NavButton href="https://www.instagram.com/victorhalim_/" icon={FaInstagram} text="Instagram" />
    </div>

    <p class="absolute bottom-14 text-base md:text-lg text-content">
      <span class="wave text-lg">ðŸ‘‹</span> 
      Open for inquiries.
      <span class="text-purple-600"> Message me here! </span>
    </p>
  </main>

  <main class="min-h-[80vh] md:min-h-screen">
    <div class="grid md:grid-cols-2 grid-cols-1 gap-y-12 md:gap-y-8 gap-x-4">
      {
        parsedProjectCollections?.map(({data}) => (
          <a
            class="group"
            href=`/projects/${data.route}`
          >
            <Image
               src={im[data.mockup]()} 
               transition:name={data.name}
              alt={`${data.title} mockup`}
              class="h-[28vh] md:h-[50vh] object-cover md:group-hover:border-2 transition-all duration-75 md:border-accent"
            />
            <div class="group-hover:text-accent text-content mt-2 md:mt-4 text-base">
              {data.title}
            </div>
          </a>
        ))
      }
    </div>
  </main>
</Layout>


